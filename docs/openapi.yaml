openapi: 3.0.2
info:
  title: E-commerce Platform API
  version: 1.0.0
  description: A basic API for an e-commerce platform.
  contact:
    name: Jarmo Venäläinen
    email: jatavena@gmail.com

servers:
  - url: http://localhost:3000
    description: Development server

tags:
  - name: Products
    description: Product management endpoints
  - name: Users
    description: User management endpoints
  - name: Categories
    description: Category management endpoints
  - name: Orders
    description: Order management endpoints
  - name: Carts
    description: Cart management endpoints
  - name: Contact Information
    description: Contact information management endpoints

paths:
# /PRODUCTS
  /products:
    get:
      tags:
        - Products
      summary: Get all products
      description: Returns all products
      parameters:
        - name: name
          in: query
          required: false
          description: Filter products by name
          schema:
            type: string
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Product'
        400:
          description: Bad request
        404:
          description: Product not found
    
    post:
      tags:
        - Products
      summary: Submit a product
      description: Creates a product in the database
      requestBody: 
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Product'
      responses:
        201:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        400:
          description: Bad request
        401:
          description: Unauthorized request
    
  /products/{id}:
    get:
      tags:
        - Products
      summary: Find product by ID
      description: Returns a single product
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the product to return
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        404:
          description: Product not found

    put:
      tags:
        - Products
      summary: Update a product defined by an ID
      description: Updates a single product
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Product'
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the product to update
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Product'
        401:
          description: Unauthorized request
        404:
          description: Product not found
    
    delete:
      tags:
        - Products
      summary: Delete product by id
      description: Deletes a single Product
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the product to delete
          schema:
            type: integer
            format: int64
      responses:
        204:
          description: Resource deleted successfully
        401:
          description: Unauthorized request
        404:
          description: Product not found
# /LOGIN
  /auth/login:
    post:
      tags:
        - Users
      summary: Authenticate and login user
      description: Authenticate and login user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                password:
                  type: string
                  format: password
      responses:
        200:
          description: Login successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
        400:
          description: Bad request
        401:
          description: Username or password incorrect
        
# /USERS    
  /users:
    get:
      tags:
        - Users
      summary: Get all users
      description: Get all users
      parameters:
        - name: username
          in: query
          required: false
          description: Filter users by username
          schema:
            type: string
        - name: firstName
          in: query
          required: false
          description: Filter users by first name
          schema:
            type: string
        - name: lastName
          in: query
          required: false
          description: Filter users by last name
          schema:
            type: string
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        400:
          description: Bad request
        404:
          description: User not found

    post:
      tags:
        - Users
      summary: Submit a user
      description: Create a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        201:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        400:
          description: Bad request

  /users/{id}:
    get:
      tags:
        - Users
      summary: Get user by id
      description: Returns a single user
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the user to return
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User' 
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: User not found

    put:
      tags:
        - Users
      summary: Update user by id
      description: Update a single user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'           
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the user to be updated
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User' 
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: User not found

    delete:
      tags:
        - Users
      summary: Delete user by id
      description: Delete single user
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the user to be deleted
          schema:
            type: integer
            format: int64
      responses:
        204:
          description: Resource deleted successfully
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: User not found
# /CATEGORIES
  /categories:
    get:
      tags:
        - Categories
      summary: Get all Categories
      description: Get all categories
      parameters:
        - name: name
          in: query
          required: false
          description: Filter categories by name
          schema:
            type: string
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Category'
        400:
          description: Bad request
        404:
          description: Category not found

    post:
      tags:
        - Categories
      summary: Submit a category
      description: Create a category
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Category'
      responses:
        201:
          description: Resource created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        400:
          description: Bad request
        401:
          description: Unauthorized request

  /categories/{id}:
    get:
      tags:
        - Categories
      summary: Get category by id
      description: Get a single category
      parameters:
        - name: id
          in: path
          required: true
          description: Id of the category to return
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        400:
          description: Bad request
        401:
          description: Unauthorized request

    put:
      tags:
        - Categories
      summary: Update category by id
      description: Update a single category
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Category'
      parameters:
        - name: id
          in: path
          required: true
          description: Id of the category to update
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
        400:
          description: Bad request
        401:
          description: Unauthorized request

    delete:
      tags:
        - Categories
      summary: Delete category by id
      description: Delete single category
      parameters:
        - name: id
          in: path
          required: true
          description: Id of the category to delete
          schema:
            type: integer
            format: int64
      responses:
        204:
          description: Resource deleted successfully
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Category not found
# /ORDERS
  /orders:
    get:
      tags:
        - Orders
      summary: Get all orders
      description: Get all orders
      parameters:
        - name: date
          in: query
          required: false
          description: Filter orders by order date
          schema:
            type: string
            format: date
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Order'
        400:
          description: Bad request
        404:
          description: Content not found

    post:
      tags:
        - Orders
      summary: Create a new order
      description: Create a new order
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Order'
      responses:
        201:
          description: Resource created successfully
        400:
          description: Bad request

  /orders/{id}:
    get:
      tags:
        - Orders
      summary: Get order by id
      description: Return single order
      parameters:
        - name: id
          in: path
          description: Id of the order to return
          required: true
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Order not found

    put:
      tags:
        - Orders
      summary: Update order by id
      description: Update single order by id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Order'
      parameters:
        - name: id
          in: path
          description: Id of the order to update
          required: true
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Order'
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Order not found

    delete:
      tags:
        - Orders
      summary: Delete order by id
      description: Delete single order
      parameters:
        - name: id
          in: path
          description: Id of the order to delete
          required: true
          schema:
            type: integer
            format: int64
      responses:
        204:
          description: Resource deleted successfully
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Order not found
# /CARTS
  /carts:
    post:
      tags:
        - Carts
      summary: Create a new cart
      description: Creates a new cart
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Cart'
      responses:
        201:
          description: Resource created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        400:
          description: Bad request
        401:
          description: Unauthorized request

  /carts/{id}:
    get:
      tags:
        - Carts
      summary: Get cart by id (admin only)
      description: Returns a shopping cart by its ID. Accessible only to administrators.
      parameters:
        - name: id
          in: path
          description: Id of the cart to return
          required: true
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Cart not found

    put:
      tags:
        - Carts
      summary: Update cart by Id
      description: Updates cart by id
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Cart'
      parameters:
        - name: id
          in: path
          description: Id of the cart to update
          required: true
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cart'
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Cart not found

    delete:
      tags:
        - Carts
      summary: Delete cart by id (admin only)
      description: Deletes a single cart. Admin only operation.
      parameters:
        - name: id
          in: path
          description: Id of the cart to delete
          required: true
          schema:
            type: integer
            format: int64
      responses:
        204:
          description: Resource deleted successfully
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Cart not found    

# /CONTACT INFORMATION
  /contactInformation:
    get:
      tags:
        - Contact Information
      summary: Get all contact information
      description: Return all contact information from the database
      parameters:
        - name: email
          in: query
          description: Filter contact information by email
          required: false
          schema:
            type: string
        - name: address
          in: query
          description: Filter contact information by address
          required: false
          schema:
            type: string
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ContactInformation'
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Content not found

    post:
      tags:
        - Contact Information
      summary: Post new contact information
      description: Creates a new contact information
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContactInformation'
      responses:
        201:
          description: Resource created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactInformation'
        400:
          description: Bad request

  /contactInformation/{contactId}:
    get:
      tags:
        - Contact Information
      summary: Get single contact information by contactId
      description: Return single contacti information by contactId
      parameters:
        - name: contactId
          in: path
          description: contactId of the contact information to return
          required: true
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactInformation'
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Contact information not found

    put:
      tags:
        - Contact Information
      summary: Update contact information by contactId
      description: Update single contact information by contactId
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ContactInformation'
      parameters:
        - name: contactId
          in: path
          description: contactId of the contact information to update
          required: true
          schema:
            type: integer
            format: int64
      responses:
        200:
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ContactInformation'
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Contact information not found

    delete:
      tags:
        - Contact Information
      summary: Delete contact information by contactId
      description: Delete single contact information by contactId
      parameters:
        - name: contactId
          in: path
          description: contactId of the contact information to update
          required: true
          schema:
            type: integer
            format: int64
      responses:
        204:
          description: Resource successfully deleted
        400:
          description: Bad request
        401:
          description: Unauthorized request
        404:
          description: Contact information not found

components:
  schemas:
    Product:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        price:
          type: number
          format: float
        description:
          type: string
        categoryId:
          type: integer
      required:
        - name
        - price
    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
        username:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        password:
          type: string
          format: password
        birthday:
          type: string
          format: date
      required:
        - username
        - firstName
        - lastName
        - password
    Category:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        taxBase:
          type: integer
          format: int64
        description:
          type: string
      required:
        - name
        - taxBase
    Order:
      type: object
      properties:
        id:
          type: integer
          format: int64
        customerId:
          type: integer
          format: int64
        total:
          type: number
          format: float
        createdAt:
          type: string
          format: date-time
      required:
        - total
    Cart:
      type: object
      properties:
        id:
          type: integer
          format: int64
        userId:
          type: integer
          format: int64
        total:
          type: number
          format: float
        status:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    ContactInformation:
      type: object
      properties:
        contactId:
          type: integer
          format: int64
        email:
          type: string
        phone:
          type: string
        address:
          type: string
        createdAt:
          type: string
          format: date-time 
        